From 183fcaf28e84c1fa57ae7eaf281c628afc10b1e7 Mon Sep 17 00:00:00 2001
From: Nicholas McKibben <nicholas.bgp@gmail.com>
Date: Sun, 4 Jun 2023 15:30:06 -0700
Subject: [PATCH] MAINT: stats: remove long double support for all boost ufuncs

---
 scipy/stats/_boost/include/code_gen.py | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/scipy/stats/_boost/include/code_gen.py b/scipy/stats/_boost/include/code_gen.py
index 1ee86d8b6..a5ff0de9d 100644
--- a/scipy/stats/_boost/include/code_gen.py
+++ b/scipy/stats/_boost/include/code_gen.py
@@ -5,7 +5,6 @@ from warnings import warn
 from textwrap import dedent
 from shutil import copyfile
 import pathlib
-import sys
 import argparse
 
 from gen_func_defs_pxd import (  # type: ignore
@@ -105,7 +104,8 @@ def _ufunc_gen(scipy_dist: str, types: list, ctor_args: tuple,
             '''))
 
         if has_NPY_LONGDOUBLE:
-            fp.write('ctypedef long double longdouble\n\n')
+            warn('Boost stats NPY_LONGDOUBLE ufunc generation not '
+                 'currently not supported!')
         if has_NPY_FLOAT16:
             warn('Boost stats NPY_FLOAT16 ufunc generation not '
                  'currently not supported!')
@@ -184,9 +184,6 @@ if __name__ == '__main__':
         x_funcs=_x_funcs,
         no_x_funcs=_no_x_funcs)
     float_types = ['NPY_FLOAT', 'NPY_DOUBLE']
-    # Don't generate the 'long double' ufunc loops on Windows.
-    if sys.platform != 'win32':
-        float_types.append('NPY_LONGDOUBLE')
     for b, s in _klass_mapper.items():
         _ufunc_gen(
             scipy_dist=s.scipy_name,
